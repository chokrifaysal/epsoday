use std::process::Command;
use std::fs;

fn main() {
    println!("cargo:rerun-if-changed=src/");

    // ensure target dir exists
    let _ = fs::create_dir_all("target");

    // Build C FFI bindings
    Command::new("gcc")
        .args(&["-shared", "-fPIC", "-o", "target/librust_ffi.so", "src/ffi/bridge.c"])
        .status()
        .unwrap_or_else(|_| std::process::ExitStatus::from_raw(1));
}
